<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista de Tareas Moderna</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <!-- Enlace al Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Color de la barra de estado en iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#6a11cb" />
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body>
    <!-- Contenedor de Autenticación -->
    <div id="auth-container">
      <div class="auth-form">
        <h2>Iniciar Sesión / Registrarse</h2>
        <input type="email" id="email" placeholder="Correo electrónico" required />
        <input type="password" id="password" placeholder="Contraseña" required />
        <div class="auth-buttons">
          <button id="btn-login">Iniciar Sesión</button>
          <button id="btn-signup">Registrarse</button>
        </div>
      </div>
    </div>

    <!-- Contenedor Principal de la App (inicialmente oculto) -->
    <div class="containerPrincipal" id="contenido" style="display: none;">
      <header class="app-header">
        <h1>Mi Lista de Tareas</h1>
        <div class="header-actions">
          <button id="btn-pdf" class="btn-secondary" title="Descargar como PDF">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            <span>PDF</span>
          </button>
          <button
            id="btn-logout"
            class="btn-secondary btn-danger"
            title="Cerrar Sesión"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Salir</span>
          </button>
        </div>
      </header>

      <div class="input-container">
        <input
          id="nuevaTarea"
          class="inputIngresar"
          type="text"
          placeholder="¿Qué necesitas hacer hoy?"
        />
        <button id="btn-agregar" class="btn-add">+</button>
      </div>

      <div class="containerSecundario">
        <div class="columna">
          <h2>Pendientes</h2>
          <div id="pendientes" class="tareas-container"></div>
        </div>
        <div class="columna">
          <h2>En Progreso</h2>
          <div id="en-progreso" class="tareas-container"></div>
        </div>
        <div class="columna">
          <h2>Terminadas</h2>
          <div id="terminadas" class="tareas-container"></div>
        </div>
      </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Mis Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
    <script src="js/pdf.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("sw.js")
            .then((registration) => {
              console.log(
                "ServiceWorker registration successful with scope: ",
                registration.scope
              );
            })
            .catch((err) => {
              console.log("ServiceWorker registration failed: ", err);
            });
        });
      }
    </script>
  </body>
</html>
